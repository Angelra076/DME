name: Check Issue Link
on:
  pull_request:
    types: [opened, edited]
    branches: [Dev]

jobs:
  check-issue:
    runs-on: ubuntu-latest
    steps:
      - name: Check for linked issue
        uses: actions/github-script@v7
        with:
          script: |
            const body = context.payload.pull_request.body || '';
            const title = context.payload.pull_request.title || '';
            const hasRef = /#\d+/.test(body) || /#\d+/.test(title);
            if (!hasRef) {
              core.setFailed('El Pull Request debe referenciar al menos un Issue (ej. #123).');
            }
